port 445

utilizes user authentication and share authentication


Methodology
=
Gain access to windows system with PsExec:
1. Enumerate for smb with nmap
	1. look for smb version, if message signing enabled but not required we can authenticate with psexec
2. BruteForce SMB with metasploit or hydra
3. Use psexec.py to authenticate with target system to get cmd shell or use Metasploit
4. pwn


SMB Authentication Process
=
1. sends a request with the username to be authenticated as
2. server asks requester to encrypt a string with the users hash
3. requester sends hashed string back to server
4. server grants access


PsExec
=
- lightweight telnet replacement for Microsoft
- execute processes on remote windows systems using user credentials
- similar to RDP except system is controlled through commands not GUI
- authentication via smb

After obtaining legitimate user credentials and authenticating with target system via PsExec we can execute arbitrary commands or obtain reverse shell

psexec.py
=
usage:

`psexec.py user@ip cmd.exe`
	enter password

Enumeration
=
`nmap -sV -sC host -p445`


Bruteforce
=
metasploit` use aux/scanner/smb/smb_login`
	setup: rport, rhosts, domain (if part of domain), user_file, pass_file, verbose = false

Metasploit Meterpreter
=
`use exploit/windows/smb/psexec` to gain meterpreter shell

Check for EternalBlue
=
`--script smb-vuln-ms17-010`